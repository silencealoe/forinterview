## TCP 为什么是三次握手 不是两次？
* 确认双方都能够接收发送数据 (可靠传输)
* 由于网络问题导致包出现滞留无法到达B端  A一段时间后会重发包
重发的包到达了B B接收到包给出响应 A确认 则建立了连接 发送数据 关闭连接

但是这时候 滞留的包 到达了B  B处理发送给Ａ　又建了新的连接　这时Ａ不会发送数据给Ｂ　Ｂ一直处于等待状态
这就导致了不必要的错误　和资源的浪费

如果是三次握手　B手动滞留的请求回复给Ａ　由于Ａ没有发起连接请求　不会做出回复　
Ｂ　收不到Ａ的回复　就知道Ａ没有建立连接　就不会分配资源给这个连接

Ａ和B　需要同步ＳＹＮ序号　序号是发送方随机的序列号开始

## TCP和UDP区别
. UDP 协议的头长度不到TCP头的一半，所以同样大小的包里UDP携带的净数据比TCP包多。

b. TCP会发响应，UDP不会。并且UDP没有Seq和Ack等概念，省去了建立连接的开销，DNS解析就使用UDP协议。TCP有3次握手4次挥手。

c. UDP不能分割报文段（MSS），超过MTU的时候，发送方的网络层负责分片，接收方收到分片后再组装起来，这个过程会消耗资源，降低性能。

d. UDP没有重传机制，丢包的时候就不能按需发送。TCP有超时重传、快速重传和SACK。

## tcp连接状态位
SYN 是发起一个连接
ACK 是回复
RST 是重新连接
FIN 是结束连接
这些带状态位的包发送 会引起双方的状态变更

流量控制： 通信双方各声明一个窗口 标识自己当前能够处理的能力 别发送太快 或者太慢
拥塞控制： 控制发送速度
顺序问题： 稳重不乱
丢包重传
连接维护 有始有终
流量控制 把握分寸 根据对方的情况做控制
拥塞控制 知进知退 根据网络情况做控制